<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - SmartAccess</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { font-family: 'Segoe UI', system-ui, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .step-active { background: #3b82f6; color: white; }
        .step-inactive { background: #e5e7eb; color: #6b7280; }
        .step-line { height: 2px; background: #e5e7eb; flex-grow: 1; margin: 0 10px; }
        .step-line.active { background: #3b82f6; }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4">
    <div class="max-w-2xl w-full">
        <!-- Carte d'inscription -->
        <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
            <!-- En-tête -->
            <div class="bg-blue-600 p-6 text-center">
                <a href="../index.html" class="inline-block mb-4">
                    <div class="bg-white p-2 rounded-lg inline-block">
                        <i class="fas fa-id-card-alt text-blue-600 text-xl"></i>
                    </div>
                </a>
                <h1 class="text-2xl font-bold text-white">Créer un compte</h1>
                <p class="text-blue-100 mt-2">Rejoignez SmartAccess en 2 minutes</p>
            </div>
            
            <!-- Étapes -->
            <div class="px-8 pt-6">
                <div class="flex items-center justify-center mb-8">
                    <div class="flex items-center">
                        <div id="step1" class="step-circle step-active">
                            <span>1</span>
                        </div>
                        <div id="line1" class="step-line w-16 md:w-24"></div>
                        <div id="step2" class="step-circle step-inactive">
                            <span>2</span>
                        </div>
                        <div id="line2" class="step-line w-16 md:w-24"></div>
                        <div id="step3" class="step-circle step-inactive">
                            <span>3</span>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between text-sm text-center mb-2">
                    <div class="w-1/3">Informations</div>
                    <div class="w-1/3">Entreprise</div>
                    <div class="w-1/3">Confirmation</div>
                </div>
            </div>
            
            <!-- Formulaire multi-étapes -->
            <div class="p-8">
                <!-- Étape 1: Informations personnelles -->
                <div id="step1Form">
                    <h2 class="text-xl font-bold mb-6 text-gray-800">Informations personnelles</h2>
                    
                    <form id="personalForm">
                        <!-- Nom et Prénom -->
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label class="block text-gray-700 mb-2 font-medium" for="firstName">
                                    <i class="fas fa-user mr-2 text-blue-500"></i>Prénom
                                </label>
                                <input type="text" id="firstName" required
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="Votre prénom">
                                <div id="firstNameError" class="text-red-500 text-sm mt-2 hidden">
                                    Le prénom est requis
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-2 font-medium" for="lastName">
                                    <i class="fas fa-user mr-2 text-blue-500"></i>Nom
                                </label>
                                <input type="text" id="lastName" required
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                       placeholder="Votre nom">
                                <div id="lastNameError" class="text-red-500 text-sm mt-2 hidden">
                                    Le nom est requis
                                </div>
                            </div>
                        </div>
                        
                        <!-- Email -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="email">
                                <i class="fas fa-envelope mr-2 text-blue-500"></i>Adresse Email
                            </label>
                            <input type="email" id="email" required
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                   placeholder="votre@email.com">
                            <div id="emailError" class="text-red-500 text-sm mt-2 hidden">
                                Veuillez entrer une adresse email valide
                            </div>
                        </div>
                        
                        <!-- Mot de passe -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="password">
                                <i class="fas fa-lock mr-2 text-blue-500"></i>Mot de passe
                            </label>
                            <div class="relative">
                                <input type="password" id="password" required
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition pr-10"
                                       placeholder="Créez un mot de passe">
                                <button type="button" id="togglePassword1" class="absolute right-3 top-3 text-gray-500">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div id="passwordError" class="text-red-500 text-sm mt-2 hidden">
                                Le mot de passe doit contenir au moins 8 caractères
                            </div>
                            <div class="mt-2">
                                <div class="flex items-center mb-1">
                                    <div id="strengthBar" class="h-2 rounded-full bg-gray-200 flex-grow mr-3">
                                        <div id="strengthFill" class="h-full rounded-full w-0 bg-red-500"></div>
                                    </div>
                                    <span id="strengthText" class="text-sm text-gray-600">Faible</span>
                                </div>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li id="lengthReq" class="flex items-center">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        Au moins 8 caractères
                                    </li>
                                    <li id="numberReq" class="flex items-center">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        Au moins un chiffre
                                    </li>
                                    <li id="upperReq" class="flex items-center">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        Au moins une majuscule
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Confirmation mot de passe -->
                        <div class="mb-8">
                            <label class="block text-gray-700 mb-2 font-medium" for="confirmPassword">
                                <i class="fas fa-lock mr-2 text-blue-500"></i>Confirmer le mot de passe
                            </label>
                            <div class="relative">
                                <input type="password" id="confirmPassword" required
                                       class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition pr-10"
                                       placeholder="Confirmez votre mot de passe">
                                <button type="button" id="togglePassword2" class="absolute right-3 top-3 text-gray-500">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div id="confirmError" class="text-red-500 text-sm mt-2 hidden">
                                Les mots de passe ne correspondent pas
                            </div>
                        </div>
                        
                        <!-- Bouton suivant -->
                        <button type="submit" id="nextStep1Btn"
                                class="w-full bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition">
                            Suivant <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </form>
                </div>
                
                <!-- Étape 2: Informations entreprise -->
                <div id="step2Form" class="hidden">
                    <h2 class="text-xl font-bold mb-6 text-gray-800">Informations entreprise</h2>
                    
                    <form id="companyForm">
                        <!-- Nom entreprise -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="companyName">
                                <i class="fas fa-building mr-2 text-blue-500"></i>Nom de l'entreprise
                            </label>
                            <input type="text" id="companyName" required
                                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                   placeholder="Nom de votre entreprise">
                            <div id="companyError" class="text-red-500 text-sm mt-2 hidden">
                                Le nom de l'entreprise est requis
                            </div>
                        </div>
                        
                        <!-- Type d'entreprise -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium" for="companyType">
                                <i class="fas fa-industry mr-2 text-blue-500"></i>Type d'entreprise
                            </label>
                            <select id="companyType" 
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition">
                                <option value="">Sélectionnez un type</option>
                                <option value="startup">Startup</option>
                                <option value="sme">PME</option>
                                <option value="large">Grande entreprise</option>
                                <option value="education">Établissement scolaire</option>
                                <option value="public">Administration publique</option>
                                <option value="other">Autre</option>
                            </select>
                        </div>
                        
                        <!-- Nombre d'employés -->
                        <div class="mb-6">
                            <label class="block text-gray-700 mb-2 font-medium">
                                <i class="fas fa-users mr-2 text-blue-500"></i>Nombre d'employés
                            </label>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="employeeCount" value="1-10" class="mr-3">
                                    <span>1-10</span>
                                </label>
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="employeeCount" value="11-50" class="mr-3">
                                    <span>11-50</span>
                                </label>
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="employeeCount" value="51-200" class="mr-3">
                                    <span>51-200</span>
                                </label>
                                <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                                    <input type="radio" name="employeeCount" value="200+" class="mr-3">
                                    <span>200+</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Besoins -->
                        <div class="mb-8">
                            <label class="block text-gray-700 mb-2 font-medium">
                                <i class="fas fa-bullseye mr-2 text-blue-500"></i>Vos besoins (facultatif)
                            </label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-3 rounded text-blue-600">
                                    <span>Contrôle d'accès physique</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-3 rounded text-blue-600">
                                    <span>Suivi des horaires</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-3 rounded text-blue-600">
                                    <span>Rapports d'activité</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-3 rounded text-blue-600">
                                    <span>Intégration ESP32</span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Boutons navigation -->
                        <div class="flex space-x-4">
                            <button type="button" id="prevStep2Btn"
                                    class="flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-50 transition">
                                <i class="fas fa-arrow-left mr-2"></i> Retour
                            </button>
                            <button type="submit" id="nextStep2Btn"
                                    class="flex-1 bg-blue-600 text-white py-3 rounded-lg font-medium hover:bg-blue-700 transition">
                                Suivant <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Étape 3: Confirmation -->
                <div id="step3Form" class="hidden">
                    <h2 class="text-xl font-bold mb-6 text-gray-800">Confirmation</h2>
                    
                    <div class="bg-green-50 border border-green-200 rounded-xl p-6 mb-8">
                        <div class="flex items-start">
                            <div class="bg-green-100 p-3 rounded-lg mr-4">
                                <i class="fas fa-check-circle text-green-600 text-xl"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-green-800 mb-2">Compte presque créé !</h3>
                                <p class="text-green-700">
                                    Vérifiez les informations ci-dessous avant de finaliser votre inscription.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Résumé -->
                    <div class="bg-gray-50 rounded-xl p-6 mb-8">
                        <h3 class="font-bold text-gray-800 mb-4">Récapitulatif</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between border-b pb-2">
                                <span class="text-gray-600">Nom complet :</span>
                                <span id="summaryName" class="font-medium">-</span>
                            </div>
                            <div class="flex justify-between border-b pb-2">
                                <span class="text-gray-600">Email :</span>
                                <span id="summaryEmail" class="font-medium">-</span>
                            </div>
                            <div class="flex justify-between border-b pb-2">
                                <span class="text-gray-600">Entreprise :</span>
                                <span id="summaryCompany" class="font-medium">-</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Type :</span>
                                <span id="summaryType" class="font-medium">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Conditions -->
                    <div class="mb-8">
                        <label class="flex items-start">
                            <input type="checkbox" id="terms" class="mt-1 mr-3" required>
                            <span class="text-gray-700 text-sm">
                                J'accepte les 
                                <a href="#" class="text-blue-600 hover:underline">conditions d'utilisation</a> 
                                et la 
                                <a href="#" class="text-blue-600 hover:underline">politique de confidentialité</a> 
                                de SmartAccess.
                            </span>
                        </label>
                        <div id="termsError" class="text-red-500 text-sm mt-2 hidden">
                            Vous devez accepter les conditions
                        </div>
                    </div>
                    
                    <!-- Boutons navigation -->
                    <div class="flex space-x-4">
                        <button type="button" id="prevStep3Btn"
                                class="flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-50 transition">
                            <i class="fas fa-arrow-left mr-2"></i> Retour
                        </button>
                        <button type="button" id="finalizeBtn"
                                class="flex-1 bg-green-600 text-white py-3 rounded-lg font-medium hover:bg-green-700 transition">
                            Créer mon compte <i class="fas fa-check ml-2"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Message succès -->
                <div id="successMessage" class="hidden text-center">
                    <div class="mb-6">
                        <div class="bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-check text-3xl text-green-600"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-3">Compte créé avec succès !</h3>
                        <p class="text-gray-600 mb-8">
                            Votre compte a été créé. Vous allez être redirigé vers votre tableau de bord.
                        </p>
                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
                        <p class="text-sm text-gray-500">Redirection en cours...</p>
                    </div>
                </div>
                
                <!-- Déjà inscrit -->
                <div class="mt-8 text-center">
                    <p class="text-gray-600">
                        Vous avez déjà un compte ?
                        <a href="login.html" class="text-blue-600 font-medium hover:text-blue-800">
                            Se connecter
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let currentStep = 1;
        const userData = {};
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            updateSteps();
            setupEventListeners();
        });
        
        // Mettre à jour l'affichage des étapes
        function updateSteps() {
            // Mettre à jour les cercles
            document.getElementById('step1').className = currentStep >= 1 ? 'step-circle step-active' : 'step-circle step-inactive';
            document.getElementById('step2').className = currentStep >= 2 ? 'step-circle step-active' : 'step-circle step-inactive';
            document.getElementById('step3').className = currentStep >= 3 ? 'step-circle step-active' : 'step-circle step-inactive';
            
            // Mettre à jour les lignes
            document.getElementById('line1').className = currentStep >= 2 ? 'step-line w-16 md:w-24 active' : 'step-line w-16 md:w-24';
            document.getElementById('line2').className = currentStep >= 3 ? 'step-line w-16 md:w-24 active' : 'step-line w-16 md:w-24';
            
            // Afficher/masquer les formulaires
            document.getElementById('step1Form').classList.toggle('hidden', currentStep !== 1);
            document.getElementById('step2Form').classList.toggle('hidden', currentStep !== 2);
            document.getElementById('step3Form').classList.toggle('hidden', currentStep !== 3);
        }
        
        // Configurer les écouteurs d'événements
        function setupEventListeners() {
            // Afficher/masquer mot de passe
            document.getElementById('togglePassword1').addEventListener('click', function() {
                togglePassword('password', this);
            });
            
            document.getElementById('togglePassword2').addEventListener('click', function() {
                togglePassword('confirmPassword', this);
            });
            
            // Validation mot de passe en temps réel
            document.getElementById('password').addEventListener('input', validatePasswordStrength);
            document.getElementById('confirmPassword').addEventListener('input', validatePasswordMatch);
            
            // Formulaire étape 1
            document.getElementById('nextStep1Btn').addEventListener('click', validateStep1);
            
            // Navigation étape 2
            document.getElementById('prevStep2Btn').addEventListener('click', () => goToStep(1));
            document.getElementById('nextStep2Btn').addEventListener('click', validateStep2);
            
            // Navigation étape 3
            document.getElementById('prevStep3Btn').addEventListener('click', () => goToStep(2));
            document.getElementById('finalizeBtn').addEventListener('click', finalizeRegistration);
        }
        
        // Fonction pour afficher/masquer mot de passe
        function togglePassword(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }
        
        // Validation force mot de passe
        function validatePasswordStrength() {
            const password = document.getElementById('password').value;
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');
            const lengthReq = document.getElementById('lengthReq');
            const numberReq = document.getElementById('numberReq');
            const upperReq = document.getElementById('upperReq');
            
            let score = 0;
            let color = 'bg-red-500';
            let text = 'Faible';
            
            // Longueur
            const hasLength = password.length >= 8;
            lengthReq.querySelector('i').className = hasLength ? 'fas fa-check text-green-500 mr-2' : 'fas fa-times text-red-500 mr-2';
            if (hasLength) score++;
            
            // Chiffre
            const hasNumber = /\d/.test(password);
            numberReq.querySelector('i').className = hasNumber ? 'fas fa-check text-green-500 mr-2' : 'fas fa-times text-red-500 mr-2';
            if (hasNumber) score++;
            
            // Majuscule
            const hasUpper = /[A-Z]/.test(password);
            upperReq.querySelector('i').className = hasUpper ? 'fas fa-check text-green-500 mr-2' : 'fas fa-times text-red-500 mr-2';
            if (hasUpper) score++;
            
            // Calcul score
            if (score === 3) {
                color = 'bg-green-500';
                text = 'Fort';
                strengthFill.style.width = '100%';
            } else if (score === 2) {
                color = 'bg-yellow-500';
                text = 'Moyen';
                strengthFill.style.width = '66%';
            } else if (score === 1) {
                color = 'bg-orange-500';
                text = 'Faible';
                strengthFill.style.width = '33%';
            } else {
                strengthFill.style.width = '0%';
            }
            
            strengthFill.className = `h-full rounded-full ${color}`;
            strengthText.textContent = text;
            strengthText.className = `text-sm ${score === 3 ? 'text-green-600' : score === 2 ? 'text-yellow-600' : 'text-red-600'}`;
        }
        
        // Validation correspondance mot de passe
        function validatePasswordMatch() {
            const password = document.getElementById('password').value;
            const confirm = document.getElementById('confirmPassword').value;
            const errorDiv = document.getElementById('confirmError');
            
            if (confirm && password !== confirm) {
                errorDiv.classList.remove('hidden');
                return false;
            } else {
                errorDiv.classList.add('hidden');
                return true;
            }
        }
        
        // Validation étape 1
        function validateStep1(e) {
            e.preventDefault();
            
            // Récupérer valeurs
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirm = document.getElementById('confirmPassword').value;
            
            // Validation
            let isValid = true;
            
            // Prénom
            if (!firstName) {
                document.getElementById('firstNameError').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('firstNameError').classList.add('hidden');
                userData.firstName = firstName;
            }
            
            // Nom
            if (!lastName) {
                document.getElementById('lastNameError').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('lastNameError').classList.add('hidden');
                userData.lastName = lastName;
            }
            
            // Email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                document.getElementById('emailError').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('emailError').classList.add('hidden');
                userData.email = email;
            }
            
            // Mot de passe
            if (!password || password.length < 8) {
                document.getElementById('passwordError').classList.remove('hidden');
                isValid = false;
            } else {
                document.getElementById('passwordError').classList.add('hidden');
                userData.password = password;
            }
            
            // Confirmation
            if (!validatePasswordMatch()) {
                isValid = false;
            }
            
            if (isValid) {
                goToStep(2);
            }
        }
        
        // Validation étape 2
        function validateStep2(e) {
            e.preventDefault();
            
            const companyName = document.getElementById('companyName').value.trim();
            
            if (!companyName) {
                document.getElementById('companyError').classList.remove('hidden');
                return;
            }
            
            document.getElementById('companyError').classList.add('hidden');
            
            // Sauvegarder données
            userData.companyName = companyName;
            userData.companyType = document.getElementById('companyType').value;
            
            // Aller à l'étape 3
            goToStep(3);
            updateSummary();
        }
        
        // Mettre à jour le résumé
        function updateSummary() {
            document.getElementById('summaryName').textContent = `${userData.firstName} ${userData.lastName}`;
            document.getElementById('summaryEmail').textContent = userData.email;
            document.getElementById('summaryCompany').textContent = userData.companyName;
            document.getElementById('summaryType').textContent = userData.companyType || 'Non spécifié';
        }
        
        // Finaliser l'inscription
        function finalizeRegistration() {
            if (!document.getElementById('terms').checked) {
                document.getElementById('termsError').classList.remove('hidden');
                return;
            }
            
            document.getElementById('termsError').classList.add('hidden');
            
            // Afficher message succès
            document.getElementById('step3Form').classList.add('hidden');
            document.getElementById('successMessage').classList.remove('hidden');
            
            // Simuler création compte
            setTimeout(() => {
                // En production, ici vous feriez un appel API
                console.log('Données utilisateur:', userData);
                
                // Redirection vers dashboard (simulation)
                window.location.href = 'dashboard-admin.html';
            }, 3000);
        }
        
        // Navigation entre étapes
        function goToStep(step) {
            currentStep = step;
            updateSteps();
        }
    </script>
</body>
</html>